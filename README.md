## KBO프로야구 점수 및 승부예측 모델 개요
- 스탯티즈(http://www.statiz.co.kr/main.php)에서 2019년부터 2022년의 4월~9월 사이의 데이터를 크롤링 한다.(크롤링 하는데 시간이 오래 걸려 엑셀파일을 첨부해두었다.)
- 해당 모델에서 사용하고자 한 데이터는 다음과 같다.

**타석, 타수, 안타, 홈런, 볼넷, 사구, 삼진, 땅볼, 플라이, 팀타율, 출루율, 잔루, 상대 선발투수 ERA,상대선발투수 WHIP**
- 그 후 점수 예측을 하는 회귀모델과 승패예측을 하는 이진분류 모델을 만든다. 이때 두 모델은 따로 설계하고 학습한다. (단 데이터는 같은 데이터를 사용한다.)
- 스코어예측이나 점수예측은 주로 경기 전에 진행되는 특성에 따라 직전 3경기의 데이터를 평균화하여 예측한다. 따라서 실제 테스트 데이터로 모델을 평가한 것보다 성능이 낮았다


## 데이터 크롤링 (KBO baseball data crowling.ipynb)

### 경기 검색
- 스탯티즈 경기일정에서 자동크롤링을 시작한다.
- 아래 그림의 빨간 박스를 처음부터 마지막 칸까지 검사한다. 이따 검사한 칸에 경기(파란 박스)가 있다면 들어간다.
![image](https://user-images.githubusercontent.com/77458624/206908226-2c51aba4-6713-4963-b5ca-64ae097e2c54.png)

### 타자, 투수, 레이블 데이터 크롤링
- 박스 스코어로 들어간다.
![image](https://user-images.githubusercontent.com/77458624/206908500-82d6b70d-c361-422a-a7d9-109ca74e8d35.png)
-----------------------------------------------
- 빨간 박스에 있는 타자 데이터를 가지고 와 split()로 나누어 딕셔너리에 저장한다.
- 파란 박스에 있는 투수 데이터를 가지고 와 딕셔너리에 저장한다.
- 노란 박스 안에 왼쪽이 A 팀의 스코어, 오른쪽이 B 팀의 스코어이고 A>B라면 0을 A<B라면 1을 저장해 총 3개의 레이블을 저장한다.(A 팀 스코어, B 팀 스코어, 승패)
- 이때 무승부 경기는 데이터에 포함하지 않았다.
![image](https://user-images.githubusercontent.com/77458624/206908883-b1925c13-83f7-405b-acf6-f66ba4cdcb84.png)
----------------------------------------
### 코드 설명(생략해도 됨)
- 데이터와 레이블을 저장할 딕셔너리 정의
![image](https://user-images.githubusercontent.com/77458624/206909102-813255ef-6164-4195-b610-3015d7ced686.png)
----
- 자동 크롤링 하는 코드를 함수화하고 예외 구문을 사용하여 뜻하지 않은 오류(페이지마다 규칙이 달라서 생기는)나 무승부 경기기 있다면 return 해 빠져나온다.

![image](https://user-images.githubusercontent.com/77458624/206909210-06bda414-17f1-4865-8342-186f63342d4f.png)
----
### 함수 내부
- 타자 데이터를 크롤링 하는 코드이다.
- 이때 AVG(팀타율)와 GOB(출루율) 데이터는 크롤링 하는 것이 아니라 크롤링 한 데이터로 생성한다.
![image](https://user-images.githubusercontent.com/77458624/206909229-5109e17c-d6d4-4a3c-a7d5-841ebba5c3d0.png)
---
- 투수 데이터를 크롤링 하는 코드이다.
![image](https://user-images.githubusercontent.com/77458624/206909371-3fdeda62-bfb2-43f6-88d4-530c2cb35d91.png)
---
- 레이블을 저장하는 코드이다.
![image](https://user-images.githubusercontent.com/77458624/206909400-560c9f0d-903e-4463-9b13-e1a967068bf3.png)
---
- 정의한 함수를 다중 for문을 사용해 자동화했고 크롤링이 끝나면 엑셀파일로 저장한다.
![image](https://user-images.githubusercontent.com/77458624/206909634-8c2800a5-a867-4595-8dc1-accd65c0ef25.png)


## 모델 학습(KBO baseball game prediction.ipynb)
**코드에 대한 설명은 ipynb 파일에 함께 설명되어 있음**
결과가 나온 경기에 대해서 예측하고자 하는 사람은 없을 것이다. 때문에 우리가 예측하고자 하는 경기는 결과가 나오지 않은 경기인데 이때 입력할 데이터를 구할 수 없게 된다.
따라서 각 구단의 직전 3경기의 데이터를 평균화하여 예측 데이터로 입력하였다.
아무래도 학습한 모델은 끝난 경기에 대해서 학습했기 때문에 평가된 것 보다 예측이 낮았다. 하지만 점수 예측 모델의 경우 어느정도 잘 예측한 반면 승부 예측 모델은 크게 잘 예측되진 않았다


